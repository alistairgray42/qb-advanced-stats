<html>
<head>
	<meta charset="utf-8">
	<title>Create an Aggregate Scoresheet</title>
	<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
	<link rel="stylesheet" type="text/css" href="/static/style.css">
	<script>
	validateForm = (sheet, agg, rosters, roster_id, email, otp, rooms, num_rounds)=>{
		return true;
	}
	$(document).ready(()=>{
		$('input[type=radio][name=rosters]').change(() => {
        if ($('input[type=radio][name=rosters]:checked').val() == 'Rosters') {
            $("#roster_id").prop("disabled", false)
        }
        else{
            $("#roster_id").prop("disabled", true)
        }
		});
		$("#submit").click((e)=>{
			sheet = $("#sheet_id").val();
			agg = $("#agg_id").val();
			rosters = $('input[type=radio][name=rosters]:checked').val() == 'Rosters'
			roster_id = $("#roster_id").val();
			email = $("#email").val();
			code = $("#access_code").val();
			rooms = $("#rooms").val()
			num_rounds = $("#num_rounds").val()
			if(validateForm(sheet, agg, rosters, roster_id, email, code, rooms, num_rounds)){
				a = {};
				a.sheet = sheet;
				a.agg = agg;
				a.rosters = rosters;
				a.roster_id = roster_id;
				a.email = email
				a.code = code;
				a.rooms = rooms;
				a.num_rounds = num_rounds
				$.get("/create/submit", a, (data)=>{
					if(data.error){
						alert(data.error);
					}
					else if(data.success){
						alert("Scoresheet generation request successful. If you do not receive an email at " + data.success + " within the next hour, please contact me")
					}
				}, "json");
			}
		})
		
	});
	</script>
</head>
<body>
		<div id="wrapper">
		<h3>ID/Link to master scoresheet:</h3>
		<input type="text" id="sheet_id" placeholder="Master Scoresheet ID">
		<h3>ID/Link to master aggregate sheet:</h3>
		<input type="text" id="agg_id" placeholder="Master Aggregate ID">
		<h3>Do you want pre-filled rosters?</h3>
		<input type="radio" value="Rosters" name="rosters" checked>Rosters<br>
		<input type="radio" value="No" name="rosters">No Rosters<br>
		<h3>If you want rosters, ID/link to roster sheet:</h3>
		<input type="text" id="roster_id" placeholder="Roster Sheet ID">
		<h3>Notification email:</h3>
		<input type="text" id="email" placeholder="Notification Email">
		<h3>Access code:</h3>
		<input type="text" id="access_code" placeholder="Access Code">
		<h3>List of rooms (max 35 and comma or new line separated):</h3>
		<textarea id="rooms" placeholder="Rooms (comma separated or one on each line)"></textarea>
		<h3>Number of Rounds:</h3>
		<input type="text" id="num_rounds" placeholder="Number of Rounds"><br><br>
		<button id="submit">Submit</button>
		</div>
		
		
	
</body>
</html>